import{S as E,i as M,s as B,a as k,k as T,q as U,K as q,h as f,c as D,l as x,m as L,r as O,n as C,b as S,G as $,H as b,o as Y,N}from"../chunks/index.5b37bd6f.js";import{S as a}from"../chunks/sweetalert2.all.fe32f612.js";const{document:p}=N;function A(v){let h,g,i,r,u;return p.title=h=v[0],{c(){g=k(),i=T("div"),r=T("div"),u=U("Please wait... (If this is taking too long try reloading the page)"),this.h()},l(t){q("svelte-1258swp",p.head).forEach(f),g=D(t),i=x(t,"DIV",{id:!0});var o=L(i);r=x(o,"DIV",{id:!0});var e=L(r);u=O(e,"Please wait... (If this is taking too long try reloading the page)"),e.forEach(f),o.forEach(f),this.h()},h(){C(r,"id","messagelol"),C(i,"id","root2")},m(t,o){S(t,g,o),S(t,i,o),$(i,r),$(r,u)},p(t,[o]){1&o&&h!==(h=t[0])&&(p.title=h)},i:b,o:b,d(t){t&&f(g),t&&f(i)}}}function P(v,h,g){let i;return Y(()=>{fetch("https://crowdcards-api.glitch.me/api/getCardData",{method:"GET"}).then(r=>r.json()).then(r=>{const u=document.getElementById("root2");let t=0;for(const o in r){const e=r[o];if(e.status===2){t=1;let d=!1;document.getElementById("messagelol").innerHTML="";const n=document.createElement("div");n.classList.add("card"),n.innerHTML=`
      <div class="card-header"><div></div><a class="flex-center" href="/view_card?cuuid=${o}">${e.name}</a><div></div></div>
        <div id="card-content" class="card-content">
          <svg></svg>
        </div>
      <div class="card-header"><img id="upvote", src="https://cdn.glitch.global/d24a8d52-d1f8-43e5-a4b9-2b8939c0a945/green-thumbs-up-11246.svg"/><div id="score">${e.score}</div><img id="downvote", src="https://cdn.glitch.global/d24a8d52-d1f8-43e5-a4b9-2b8939c0a945/thumbs-down-14924.svg", width="16", height="16"/></div>
      `;const c=n.querySelector("#score");e.score>0?c.innerHTML=`<font color="green">${e.score}</font>`:e.score===0?c.innerHTML=`<font color="white">${e.score}</font>`:e.score<0&&(c.innerHTML=`<font color="red">${e.score}</font>`);const m=n.querySelector("svg");m.innerHTML=e.data;const w=n.querySelector("#upvote"),y=n.querySelector("#downvote"),I=n.getElementsByClassName("card-header")[0],H=n.getElementsByClassName("card-header")[1];requestAnimationFrame(()=>{const l=m.getBBox();m.setAttribute("viewBox",`${l.x} ${l.y} ${l.width} ${l.height}`)}),m.addEventListener("click",()=>{n.classList.toggle("expanded"),I.classList.toggle("expanded"),H.classList.toggle("expanded"),w.classList.toggle("expanded"),y.classList.toggle("expanded")}),y.addEventListener("click",()=>{d===!1?a.fire({icon:"question",text:"Are you sure you want to downvote this card? There is no way to reverse this!",showCancelButton:!0,confirmButtonText:"Downvote"}).then(l=>{l.isConfirmed&&fetch("https://crowdcards-api.glitch.me/api/downvoteCard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({CUUID:o,UUID:localStorage.getItem("uuid"),stoken:localStorage.getItem("sessionToken")})}).then(s=>s.text()).then(s=>{s.startsWith("001")?(d=!0,e.score-1>0?c.innerHTML=`<font color="green">${e.score-1}</font>`:e.score-1==0?c.innerHTML=`<font color="white">${e.score-1}</font>`:e.score-1<0&&(c.innerHTML=`<font color="red">${e.score-1}</font>`),a.fire("You have downvoted this card!","","success")):s==="003-0004"?(d=!0,a.fire({icon:"error",title:"Oops!",text:"You already voted on this card! Sorry about that."})):a.fire({text:`Something went wrong downvoting the card! The error message was ${s}.`,title:"Uh oh!",icon:"error"})})}):d===!0&&a.fire({icon:"error",title:"Oops!",text:"You already voted on this card! Sorry about that."})}),w.addEventListener("click",()=>{d===!1?a.fire({icon:"question",text:"Are you sure you want to upvote this card? There is no way to reverse this!",showCancelButton:!0,confirmButtonText:"Upvote"}).then(l=>{l.isConfirmed&&fetch("https://crowdcards-api.glitch.me/api/upvoteCard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({CUUID:o,UUID:localStorage.getItem("uuid"),stoken:localStorage.getItem("sessionToken")})}).then(s=>s.text()).then(s=>{s.startsWith("001")?(d=!0,e.score+1>0?c.innerHTML=`<font color="green">${e.score+1}</font>`:e.score+1===0?c.innerHTML=`<font color="white">${e.score+1}</font>`:e.score+1<0&&(c.innerHTML=`<font color="red">${e.score+1}</font>`),a.fire("You have upvoted this card!","","success")):s==="003-0004"?(d=!0,a.fire({icon:"error",title:"Oops!",text:"You already voted on this card! Sorry about that."})):a.fire({text:`Something went wrong upvoting the card! The error message was ${s}.`,title:"Uh oh!",icon:"error"})})}):d===!0&&a.fire({icon:"error",title:"Oops!",text:"You already voted on this card! Sorry about that."})}),u.appendChild(n)}}t===0&&(document.getElementById("messagelol").innerHTML='<font color="red">There are no cards in this category yet! Come back later.</font>')})}),g(0,i="CrowdCards - Verified Cards"),["CrowdCards - Verified Cards"]}class G extends E{constructor(h){super(),M(this,h,P,A,B,{})}}export{G as component};
