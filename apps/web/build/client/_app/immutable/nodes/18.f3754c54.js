import{S as te,i as re,s as oe,a as m,k as d,q as O,K as ne,h as l,c as f,l as u,m as w,r as k,n as C,b as Z,G as r,H as ee,I as se,o as ae,N as ie}from"../chunks/index.5b37bd6f.js";import{S as y}from"../chunks/sweetalert2.all.fe32f612.js";import{p as ce}from"../chunks/stores.eb4638b3.js";const{document:J}=ie;function de(A){let b,E,h,g,L,v,x,t,e,M,s,B,U,n,T,S,a,V,H,$,D,i,c,R,P,Y,N,j,F,G,q;return J.title=b=A[0],{c(){E=m(),h=d("div"),g=d("div"),L=d("p"),v=O("Please wait..."),x=m(),t=d("div"),e=d("br"),M=m(),s=d("div"),B=O("UUID:"),U=m(),n=d("div"),T=O("Creator UUID:"),S=m(),a=d("div"),V=O("Current score:"),H=m(),$=d("br"),D=m(),i=d("div"),c=O("Current status:"),R=m(),P=d("div"),Y=m(),N=d("br"),j=m(),F=d("br"),G=m(),q=d("div"),this.h()},l(p){ne("svelte-1258swp",J.head).forEach(l),E=f(p),h=u(p,"DIV",{class:!0});var I=w(h);g=u(I,"DIV",{id:!0,class:!0});var W=w(g);L=u(W,"P",{});var _=w(L);v=k(_,"Please wait..."),_.forEach(l),W.forEach(l),x=f(I),t=u(I,"DIV",{class:!0});var o=w(t);e=u(o,"BR",{}),M=f(o),s=u(o,"DIV",{id:!0});var K=w(s);B=k(K,"UUID:"),K.forEach(l),U=f(o),n=u(o,"DIV",{id:!0});var z=w(n);T=k(z,"Creator UUID:"),z.forEach(l),S=f(o),a=u(o,"DIV",{id:!0});var Q=w(a);V=k(Q,"Current score:"),Q.forEach(l),H=f(o),$=u(o,"BR",{}),D=f(o),i=u(o,"DIV",{id:!0});var X=w(i);c=k(X,"Current status:"),X.forEach(l),R=f(o),P=u(o,"DIV",{id:!0}),w(P).forEach(l),Y=f(o),N=u(o,"BR",{}),j=f(o),F=u(o,"BR",{}),G=f(o),q=u(o,"DIV",{id:!0}),w(q).forEach(l),o.forEach(l),I.forEach(l),this.h()},h(){C(g,"id","root"),C(g,"class","w-6/12 pr-5"),C(s,"id","value1"),C(n,"id","value2"),C(a,"id","value3"),C(i,"id","value4"),C(P,"id","value5"),C(q,"id","REPLACE_ME"),C(t,"class","w-6/12 text-center"),C(h,"class","flex justify-between p-5")},m(p,I){Z(p,E,I),Z(p,h,I),r(h,g),r(g,L),r(L,v),r(h,x),r(h,t),r(t,e),r(t,M),r(t,s),r(s,B),r(t,U),r(t,n),r(n,T),r(t,S),r(t,a),r(a,V),r(t,H),r(t,$),r(t,D),r(t,i),r(i,c),r(t,R),r(t,P),r(t,Y),r(t,N),r(t,j),r(t,F),r(t,G),r(t,q)},p(p,[I]){1&I&&b!==(b=p[0])&&(J.title=b)},i:ee,o:ee,d(p){p&&l(E),p&&l(h)}}}function ue(A,b,E){let h,g;se(A,ce,v=>E(1,g=v));const L=g.url.searchParams;return ae(()=>{fetch("https://crowdcards-api.glitch.me/api/getCardData",{method:"GET"}).then(v=>v.json()).then(v=>{const x=document.getElementById("root");console.log(x);for(const t in v){const e=v[t];let M=L.get("cuuid");if(M===t){let s=!1;const B=document.getElementById("value1"),U=document.getElementById("value2"),n=document.getElementById("value3"),T=document.getElementById("value4"),S=document.getElementById("value5");B.innerHTML=`UUID: ${t}`,U.innerHTML=`Creator UUID: ${e.uploader}`,e.score>0?n.innerHTML=`Current score: <font color="green">${e.score}</font>`:e.score===0?n.innerHTML=`Current score: <font color="white">${e.score}</font>`:e.score<0&&(n.innerHTML=`Current score: <font color="red">${e.score}</font>`),e.status===0?T.innerHTML="Current status: In Community queue":e.status===1?T.innerHTML="Current status: In Administration queue":e.status===2?(T.innerHTML="Current status: Approved!",S.innerHTML=`Reason: ${e.reason}`):e.status===3&&(T.innerHTML="Current status: DENIED.",S.innerHTML=`Reason: ${e.reason}`),localStorage.getItem("uuid")&&e.spid&&(document.getElementById("REPLACE_ME").innerHTML=`
          <form action="https://crowdcards-api.glitch.me/api/purchase-card?cuuid=${M}&uuid=${localStorage.getItem("uuid")}" method="POST">
        <button type="submit" class="text-white-900 bg-[#5539cc] hover:bg-[#5539cc]/90 focus:ring-4 focus:outline-none focus:ring-[#F7BE38]/25 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-[#F7BE38]/25 mr-2 mb-2">
  <img class="w-7 h-7 mr-2 -ml-1" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stripe" role="img" src="https://cdn.glitch.global/706b2edd-9a0c-4d84-82d3-abcf8d553bfe/1200x630wa-removebg-preview.png?v=1681397868135"/>
  Purchase with Stripe
</button>
      </form>`),x.innerHTML="";const a=document.createElement("div");a.classList.add("card"),a.innerHTML=`
      <div class="card-header"><img id="upvote", src="https://cdn.glitch.global/d24a8d52-d1f8-43e5-a4b9-2b8939c0a945/green-thumbs-up-11246.svg"/>${e.name}<img id="downvote", src="https://cdn.glitch.global/d24a8d52-d1f8-43e5-a4b9-2b8939c0a945/thumbs-down-14924.svg"/></div>
        <div class="card-content">
          <svg></svg>
        </div>
      `;const V=a.getElementsByClassName("card-header")[0],H=a.querySelector("#upvote"),$=a.querySelector("#downvote");H.classList.toggle("expanded"),$.classList.toggle("expanded"),a.classList.toggle("expanded"),V.classList.toggle("expanded");const D=a.querySelector("svg");D.innerHTML=e.data,requestAnimationFrame(()=>{const i=D.getBBox();D.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`)}),$.addEventListener("click",()=>{s===!1?y.fire({icon:"question",text:"Are you sure you want to downvote this card? There is no way to reverse this!",showCancelButton:!0,confirmButtonText:"Downvote"}).then(i=>{i.isConfirmed&&fetch("https://crowdcards-api.glitch.me/api/downvoteCard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({CUUID:t,UUID:localStorage.getItem("uuid"),stoken:localStorage.getItem("sessionToken")})}).then(c=>c.text()).then(c=>{c.startsWith("001")?(s=!0,e.score-1>0?n.innerHTML=`Current score: <font color="green">${e.score-1}</font>`:e.score-1==0?n.innerHTML=`Current score: <font color="white">${e.score-1}</font>`:e.score-1<0&&(n.innerHTML=`Current score: <font color="red">${e.score-1}</font>`),y.fire("You have downvoted this card!","","success")):c==="003-0004"?(s=!0,y.fire({icon:"error",title:"Oops!",text:"You already voted on this card! Sorry about that."})):y.fire(`Something went wrong downvoting the card! The error message was ${c}.`,"","error")})}):s===!0&&y.fire({icon:"error",title:"Oops!",text:"You already voted on this card! Sorry about that."})}),H.addEventListener("click",()=>{s===!1?y.fire({icon:"question",text:"Are you sure you want to upvote this card? There is no way to reverse this!",showCancelButton:!0,confirmButtonText:"Upvote"}).then(i=>{i.isConfirmed&&fetch("https://crowdcards-api.glitch.me/api/upvoteCard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({CUUID:t,UUID:localStorage.getItem("uuid"),stoken:localStorage.getItem("sessionToken")})}).then(c=>c.text()).then(c=>{c.startsWith("001")?(s=!0,e.score+1>0?n.innerHTML=`Current score: <font color="green">${e.score+1}</font>`:e.score+1===0?n.innerHTML=`Current score: <font color="white">${e.score+1}</font>`:e.score+1<0&&(n.innerHTML=`Current score: <font color="red">${e.score+1}</font>`),y.fire("You have upvoted this card!","","success")):c==="003-0004"?(s=!0,y.fire({icon:"error",title:"Oops!",text:"You already voted on this card! Sorry about that."})):y.fire(`Something went wrong upvoting the card! The error message was ${c}.`,"","error")})}):s===!0&&y.fire({icon:"error",title:"Oops!",text:"You already voted on this card! Sorry about that."})}),x.appendChild(a)}}})}),E(0,h="CrowdCards - View Card"),["CrowdCards - View Card"]}class fe extends te{constructor(b){super(),re(this,b,ue,de,oe,{})}}export{fe as component};
